{"ast":null,"code":"import _slicedToArray from\"/Users/edgarspuce/React/heroku-spending-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import moment from\"moment\";import{GetTotal}from\"../Utilities/Total\";import ModalWindow from\"../Components/ModalWindow\";import{Paper}from\"@material-ui/core\";import{getData}from\"../Data/ApiCalls\";function DayTable(props){var items=props.items;var tableRows=items.map(function(item,i){return/*#__PURE__*/React.createElement(\"tr\",{key:i},/*#__PURE__*/React.createElement(\"td\",null,item.type),/*#__PURE__*/React.createElement(\"td\",null,item.place),/*#__PURE__*/React.createElement(\"td\",null,item.date),/*#__PURE__*/React.createElement(\"td\",null,item.amount));});return/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Type\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Place\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Date\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Amount\"))),/*#__PURE__*/React.createElement(\"tbody\",null,tableRows));}function Table(props){var weeks=props.weeks,items=props.items,selectedMonth=props.selectedMonth;return/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(TableHead,null),/*#__PURE__*/React.createElement(TableBody,{weeks:weeks,items:items,selectedMonth:selectedMonth}));}function TableHead(){var weekdayNames=[];var weekTotal=/*#__PURE__*/React.createElement(\"th\",{className:\"align-middle text-center\"},\"Week total\");for(var i=1;i<=7;i++){var weekday=/*#__PURE__*/React.createElement(\"th\",{key:i,className:\"align-middle text-center\"},moment().isoWeekday([i]).format(\"ddd\"));weekdayNames.push(weekday);}weekdayNames.push(weekTotal);return/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,weekdayNames));}function TableBody(props){var weeks=props.weeks,items=props.items,selectedMonth=props.selectedMonth;var spendingMonth=items.filter(function(item,i){return new Date(item.date).getMonth()===selectedMonth.month();});var prevMonthSpending=items.filter(function(item,i){return new Date(item.date).getMonth()===selectedMonth.month()-1;});var nextMonthSpending=items.filter(function(item,i){return new Date(item.date).getMonth()===selectedMonth.month()+1;});console.log(nextMonthSpending);var description=\"btn btn-outline-warning\";var monthItems=spendingMonth;var weeksLen=weeks.length;var rows=weeks.map(function(week,index){var weekSpending=0;var weekItems=[];var td=week.map(function(day,i){var daySpending;var style={color:\"\",backgroundColor:\"\"};if(index===0&&day>20){description=\"btn\";style.color=\"black\";style.backgroundColor=\"#e0e0e0\";daySpending=prevMonthSpending.filter(function(item,i){return moment(item.date).date()===day;});}else if(index===weeksLen-1&&day<10){description=\"btn \";style.color=\"black\";style.backgroundColor=\"#e0e0e0\";daySpending=nextMonthSpending.filter(function(item,i){return moment(item.date).date()===day;});}else{description=\"btn \";style.color=\"black\";style.backgroundColor=\"#80cbc4\";daySpending=spendingMonth.filter(function(item,i){return moment(item.date).date()===day;});}var totalPerDay=GetTotal(daySpending);weekSpending+=totalPerDay;if(totalPerDay>0){weekItems.push(daySpending);return/*#__PURE__*/React.createElement(\"td\",{className:\"align-middle text-center\"},/*#__PURE__*/React.createElement(ModalWindow,{style:style,buttonName:day,headerName:\"Total spent: \".concat(totalPerDay),classDescription:description,bodyComponent:/*#__PURE__*/React.createElement(DayTable,{items:daySpending})}));}else{return/*#__PURE__*/React.createElement(\"td\",{className:\"align-middle text-center\"},day);}});if(weekSpending>0){var weekStyle={backgroundColor:\"#ff8a65\"};return/*#__PURE__*/React.createElement(\"tr\",null,td,/*#__PURE__*/React.createElement(\"td\",{className:\"align-middle text-center\"},/*#__PURE__*/React.createElement(ModalWindow,{style:weekStyle,buttonName:weekSpending,headerName:\"Total spent: \".concat(weekSpending),classDescription:\"btn btn-block text-dark\",bodyComponent:/*#__PURE__*/React.createElement(DayTable,{items:weekItems.flat()})})));}else{return/*#__PURE__*/React.createElement(\"tr\",null,td);}});var monthStyle={backgroundColor:\"#ffd54f\"};return/*#__PURE__*/React.createElement(\"tbody\",null,rows,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:\"12\",className:\"align-middle text-center\"},\"Total in \",selectedMonth.format(\"MMMM\"),\" :\",\" \",/*#__PURE__*/React.createElement(ModalWindow,{style:monthStyle,buttonName:GetTotal(monthItems),headerName:\"Total spent: \".concat(GetTotal(monthItems)),classDescription:\"btn btn-block text-dark\",bodyComponent:/*#__PURE__*/React.createElement(DayTable,{items:monthItems.flat()})}))));}function GetStartOfMonth(month,weeks){var currMonth=month.month();var prevMonth=currMonth-1;var prevMonthDays=moment().month(prevMonth).daysInMonth();var w=Array.from(weeks[0],function(item){return typeof item===\"undefined\"?\"\":item;});var missingStart=w.lastIndexOf(\"\");var deduct=missingStart;for(var index=0;index<=missingStart;index++){w[index]=prevMonthDays-deduct;deduct--;}return w;}function GetEndOfMonth(weeks){var len=weeks.length;var w=Array.from(weeks[len-1],function(item){return typeof item===\"undefined\"?\"\":item;});var missingEnd=w.indexOf(\"\");var add=1;for(var index=missingEnd;index<7;index++){w[index]=add;add++;}return w;}function GetWeeksOfMonth(month){var dayCount=month.daysInMonth();var weeks=[];var week=new Array(7);for(var index=1;index<=dayCount;index++){var d=month.date(index).isoWeekday();if(week[6]!==undefined){weeks.push(week);week=new Array(7);week[d-1]=index;}else{week[d-1]=index;}if(index===dayCount){weeks.push(week);}}var firstWeek=GetStartOfMonth(month,weeks);weeks.shift();weeks.unshift(firstWeek);var lastWeek=GetEndOfMonth(weeks);weeks.pop();weeks.push(lastWeek);return weeks;}function DisplayCalendar(props){// const { items } = props;\nvar _useState=useState(moment()),_useState2=_slicedToArray(_useState,2),selectedMonth=_useState2[0],setMonth=_useState2[1];var _useState3=useState(GetWeeksOfMonth(selectedMonth)),_useState4=_slicedToArray(_useState3,2),weeks=_useState4[0],setWeeks=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),items=_useState6[0],setItems=_useState6[1];useEffect(function(){getData().then(function(res){setItems(res);});},[]);function loadNextMonth(props){var nextMonth=props.add(1,\"month\");setMonth(nextMonth);setWeeks(GetWeeksOfMonth(selectedMonth));}function loadPreviousMonth(props){var previousMonth=props.subtract(1,\"month\");setMonth(previousMonth);setWeeks(GetWeeksOfMonth(selectedMonth));}return/*#__PURE__*/React.createElement(Paper,{elevation:3},/*#__PURE__*/React.createElement(\"div\",{className:\"container border\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row container m-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 text-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-info\",onClick:function onClick(){return loadPreviousMonth(selectedMonth);}},\"Previous\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-center\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"text-middle\"},selectedMonth.format(\"MMMM\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 text-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-info\",onClick:function onClick(){return loadNextMonth(selectedMonth);}},\"Next\"))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Table,{weeks:weeks,selectedMonth:selectedMonth,items:items}))));}export default DisplayCalendar;","map":{"version":3,"sources":["/Users/edgarspuce/React/heroku-spending-app/client/src/OldVersion/Components/Calendar.js"],"names":["React","useState","useEffect","moment","GetTotal","ModalWindow","Paper","getData","DayTable","props","items","tableRows","map","item","i","type","place","date","amount","Table","weeks","selectedMonth","TableHead","weekdayNames","weekTotal","weekday","isoWeekday","format","push","TableBody","spendingMonth","filter","Date","getMonth","month","prevMonthSpending","nextMonthSpending","console","log","description","monthItems","weeksLen","length","rows","week","index","weekSpending","weekItems","td","day","daySpending","style","color","backgroundColor","totalPerDay","weekStyle","flat","monthStyle","GetStartOfMonth","currMonth","prevMonth","prevMonthDays","daysInMonth","w","Array","from","missingStart","lastIndexOf","deduct","GetEndOfMonth","len","missingEnd","indexOf","add","GetWeeksOfMonth","dayCount","d","undefined","firstWeek","shift","unshift","lastWeek","pop","DisplayCalendar","setMonth","setWeeks","setItems","then","res","loadNextMonth","nextMonth","loadPreviousMonth","previousMonth","subtract"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,QAAT,KAAyB,oBAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,OAASC,KAAT,KAAsB,mBAAtB,CACA,OAASC,OAAT,KAAwB,kBAAxB,CAEA,QAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,IACfC,CAAAA,KADe,CACLD,KADK,CACfC,KADe,CAGvB,GAAMC,CAAAA,SAAS,CAAGD,KAAK,CAACE,GAAN,CAAU,SAACC,IAAD,CAAOC,CAAP,CAAa,CACvC,mBACE,0BAAI,GAAG,CAAEA,CAAT,eACE,8BAAKD,IAAI,CAACE,IAAV,CADF,cAEE,8BAAKF,IAAI,CAACG,KAAV,CAFF,cAGE,8BAAKH,IAAI,CAACI,IAAV,CAHF,cAIE,8BAAKJ,IAAI,CAACK,MAAV,CAJF,CADF,CAQD,CATiB,CAAlB,CAWA,mBACE,6BAAO,SAAS,CAAC,OAAjB,eACE,8CACE,2CACE,0BAAI,KAAK,CAAC,KAAV,SADF,cAEE,0BAAI,KAAK,CAAC,KAAV,UAFF,cAGE,0BAAI,KAAK,CAAC,KAAV,SAHF,cAIE,0BAAI,KAAK,CAAC,KAAV,WAJF,CADF,CADF,cASE,iCAAQP,SAAR,CATF,CADF,CAaD,CAED,QAASQ,CAAAA,KAAT,CAAeV,KAAf,CAAsB,IACZW,CAAAA,KADY,CACoBX,KADpB,CACZW,KADY,CACLV,KADK,CACoBD,KADpB,CACLC,KADK,CACEW,aADF,CACoBZ,KADpB,CACEY,aADF,CAGpB,mBACE,6BAAO,SAAS,CAAC,OAAjB,eACE,oBAAC,SAAD,MADF,cAEE,oBAAC,SAAD,EAAW,KAAK,CAAED,KAAlB,CAAyB,KAAK,CAAEV,KAAhC,CAAuC,aAAa,CAAEW,aAAtD,EAFF,CADF,CAMD,CAED,QAASC,CAAAA,SAAT,EAAqB,CACnB,GAAMC,CAAAA,YAAY,CAAG,EAArB,CACA,GAAMC,CAAAA,SAAS,cAAG,0BAAI,SAAS,CAAC,0BAAd,eAAlB,CAEA,IAAK,GAAIV,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,EAAI,CAArB,CAAwBA,CAAC,EAAzB,CAA6B,CAC3B,GAAMW,CAAAA,OAAO,cACX,0BAAI,GAAG,CAAEX,CAAT,CAAY,SAAS,CAAC,0BAAtB,EACGX,MAAM,GAAGuB,UAAT,CAAoB,CAACZ,CAAD,CAApB,EAAyBa,MAAzB,CAAgC,KAAhC,CADH,CADF,CAKAJ,YAAY,CAACK,IAAb,CAAkBH,OAAlB,EACD,CACDF,YAAY,CAACK,IAAb,CAAkBJ,SAAlB,EAEA,mBACE,8CACE,8BAAKD,YAAL,CADF,CADF,CAKD,CAED,QAASM,CAAAA,SAAT,CAAmBpB,KAAnB,CAA0B,IAChBW,CAAAA,KADgB,CACgBX,KADhB,CAChBW,KADgB,CACTV,KADS,CACgBD,KADhB,CACTC,KADS,CACFW,aADE,CACgBZ,KADhB,CACFY,aADE,CAGxB,GAAMS,CAAAA,aAAa,CAAGpB,KAAK,CAACqB,MAAN,CAAa,SAAClB,IAAD,CAAOC,CAAP,CAAa,CAC9C,MAAO,IAAIkB,CAAAA,IAAJ,CAASnB,IAAI,CAACI,IAAd,EAAoBgB,QAApB,KAAmCZ,aAAa,CAACa,KAAd,EAA1C,CACD,CAFqB,CAAtB,CAIA,GAAMC,CAAAA,iBAAiB,CAAGzB,KAAK,CAACqB,MAAN,CAAa,SAAClB,IAAD,CAAOC,CAAP,CAAa,CAClD,MAAO,IAAIkB,CAAAA,IAAJ,CAASnB,IAAI,CAACI,IAAd,EAAoBgB,QAApB,KAAmCZ,aAAa,CAACa,KAAd,GAAwB,CAAlE,CACD,CAFyB,CAA1B,CAIA,GAAME,CAAAA,iBAAiB,CAAG1B,KAAK,CAACqB,MAAN,CAAa,SAAClB,IAAD,CAAOC,CAAP,CAAa,CAClD,MAAO,IAAIkB,CAAAA,IAAJ,CAASnB,IAAI,CAACI,IAAd,EAAoBgB,QAApB,KAAmCZ,aAAa,CAACa,KAAd,GAAwB,CAAlE,CACD,CAFyB,CAA1B,CAGAG,OAAO,CAACC,GAAR,CAAYF,iBAAZ,EAEA,GAAIG,CAAAA,WAAW,CAAG,yBAAlB,CACA,GAAIC,CAAAA,UAAU,CAAGV,aAAjB,CACA,GAAIW,CAAAA,QAAQ,CAAGrB,KAAK,CAACsB,MAArB,CACA,GAAMC,CAAAA,IAAI,CAAGvB,KAAK,CAACR,GAAN,CAAU,SAACgC,IAAD,CAAOC,KAAP,CAAiB,CACtC,GAAIC,CAAAA,YAAY,CAAG,CAAnB,CACA,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CAEA,GAAMC,CAAAA,EAAE,CAAGJ,IAAI,CAAChC,GAAL,CAAS,SAACqC,GAAD,CAAMnC,CAAN,CAAY,CAC9B,GAAIoC,CAAAA,WAAJ,CACA,GAAMC,CAAAA,KAAK,CAAG,CACZC,KAAK,CAAE,EADK,CAEZC,eAAe,CAAE,EAFL,CAAd,CAIA,GAAIR,KAAK,GAAK,CAAV,EAAeI,GAAG,CAAG,EAAzB,CAA6B,CAC3BV,WAAW,CAAG,KAAd,CACAY,KAAK,CAACC,KAAN,CAAc,OAAd,CACAD,KAAK,CAACE,eAAN,CAAwB,SAAxB,CACAH,WAAW,CAAGf,iBAAiB,CAACJ,MAAlB,CAAyB,SAAClB,IAAD,CAAOC,CAAP,CAAa,CAClD,MAAOX,CAAAA,MAAM,CAACU,IAAI,CAACI,IAAN,CAAN,CAAkBA,IAAlB,KAA6BgC,GAApC,CACD,CAFa,CAAd,CAGD,CAPD,IAOO,IAAIJ,KAAK,GAAKJ,QAAQ,CAAG,CAArB,EAA0BQ,GAAG,CAAG,EAApC,CAAwC,CAC7CV,WAAW,CAAG,MAAd,CACAY,KAAK,CAACC,KAAN,CAAc,OAAd,CACAD,KAAK,CAACE,eAAN,CAAwB,SAAxB,CACAH,WAAW,CAAGd,iBAAiB,CAACL,MAAlB,CAAyB,SAAClB,IAAD,CAAOC,CAAP,CAAa,CAClD,MAAOX,CAAAA,MAAM,CAACU,IAAI,CAACI,IAAN,CAAN,CAAkBA,IAAlB,KAA6BgC,GAApC,CACD,CAFa,CAAd,CAGD,CAPM,IAOA,CACLV,WAAW,CAAG,MAAd,CACAY,KAAK,CAACC,KAAN,CAAc,OAAd,CACAD,KAAK,CAACE,eAAN,CAAwB,SAAxB,CACAH,WAAW,CAAGpB,aAAa,CAACC,MAAd,CAAqB,SAAClB,IAAD,CAAOC,CAAP,CAAa,CAC9C,MAAOX,CAAAA,MAAM,CAACU,IAAI,CAACI,IAAN,CAAN,CAAkBA,IAAlB,KAA6BgC,GAApC,CACD,CAFa,CAAd,CAGD,CAED,GAAMK,CAAAA,WAAW,CAAGlD,QAAQ,CAAC8C,WAAD,CAA5B,CACAJ,YAAY,EAAIQ,WAAhB,CAEA,GAAIA,WAAW,CAAG,CAAlB,CAAqB,CACnBP,SAAS,CAACnB,IAAV,CAAesB,WAAf,EAEA,mBACE,0BAAI,SAAS,CAAC,0BAAd,eACE,oBAAC,WAAD,EACE,KAAK,CAAEC,KADT,CAEE,UAAU,CAAEF,GAFd,CAGE,UAAU,wBAAkBK,WAAlB,CAHZ,CAIE,gBAAgB,CAAEf,WAJpB,CAKE,aAAa,cAAE,oBAAC,QAAD,EAAU,KAAK,CAAEW,WAAjB,EALjB,EADF,CADF,CAWD,CAdD,IAcO,CACL,mBAAO,0BAAI,SAAS,CAAC,0BAAd,EAA0CD,GAA1C,CAAP,CACD,CACF,CAjDU,CAAX,CAmDA,GAAIH,YAAY,CAAG,CAAnB,CAAsB,CACpB,GAAIS,CAAAA,SAAS,CAAG,CACdF,eAAe,CAAE,SADH,CAAhB,CAGA,mBACE,8BACGL,EADH,cAGE,0BAAI,SAAS,CAAC,0BAAd,eACE,oBAAC,WAAD,EACE,KAAK,CAAEO,SADT,CAEE,UAAU,CAAET,YAFd,CAGE,UAAU,wBAAkBA,YAAlB,CAHZ,CAIE,gBAAgB,CAAC,yBAJnB,CAKE,aAAa,cAAE,oBAAC,QAAD,EAAU,KAAK,CAAEC,SAAS,CAACS,IAAV,EAAjB,EALjB,EADF,CAHF,CADF,CAeD,CAnBD,IAmBO,CACL,mBAAO,8BAAKR,EAAL,CAAP,CACD,CACF,CA7EY,CAAb,CA+EA,GAAIS,CAAAA,UAAU,CAAG,CACfJ,eAAe,CAAE,SADF,CAAjB,CAIA,mBACE,iCACGV,IADH,cAEE,2CACE,0BAAI,OAAO,CAAC,IAAZ,CAAiB,SAAS,CAAC,0BAA3B,cACYtB,aAAa,CAACM,MAAd,CAAqB,MAArB,CADZ,MAC4C,GAD5C,cAEE,oBAAC,WAAD,EACE,KAAK,CAAE8B,UADT,CAEE,UAAU,CAAErD,QAAQ,CAACoC,UAAD,CAFtB,CAGE,UAAU,wBAAkBpC,QAAQ,CAACoC,UAAD,CAA1B,CAHZ,CAIE,gBAAgB,CAAC,yBAJnB,CAKE,aAAa,cAAE,oBAAC,QAAD,EAAU,KAAK,CAAEA,UAAU,CAACgB,IAAX,EAAjB,EALjB,EAFF,CADF,CAFF,CADF,CAiBD,CAED,QAASE,CAAAA,eAAT,CAAyBxB,KAAzB,CAAgCd,KAAhC,CAAuC,CACrC,GAAIuC,CAAAA,SAAS,CAAGzB,KAAK,CAACA,KAAN,EAAhB,CACA,GAAI0B,CAAAA,SAAS,CAAGD,SAAS,CAAG,CAA5B,CACA,GAAIE,CAAAA,aAAa,CAAG1D,MAAM,GAAG+B,KAAT,CAAe0B,SAAf,EAA0BE,WAA1B,EAApB,CAEA,GAAIC,CAAAA,CAAC,CAAGC,KAAK,CAACC,IAAN,CAAW7C,KAAK,CAAC,CAAD,CAAhB,CAAqB,SAACP,IAAD,QAC3B,OAAOA,CAAAA,IAAP,GAAgB,WAAhB,CAA8B,EAA9B,CAAmCA,IADR,EAArB,CAAR,CAIA,GAAIqD,CAAAA,YAAY,CAAGH,CAAC,CAACI,WAAF,CAAc,EAAd,CAAnB,CACA,GAAIC,CAAAA,MAAM,CAAGF,YAAb,CACA,IAAK,GAAIrB,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,EAAIqB,YAA7B,CAA2CrB,KAAK,EAAhD,CAAoD,CAClDkB,CAAC,CAAClB,KAAD,CAAD,CAAWgB,aAAa,CAAGO,MAA3B,CACAA,MAAM,GACP,CAED,MAAOL,CAAAA,CAAP,CACD,CAED,QAASM,CAAAA,aAAT,CAAuBjD,KAAvB,CAA8B,CAC5B,GAAIkD,CAAAA,GAAG,CAAGlD,KAAK,CAACsB,MAAhB,CAEA,GAAIqB,CAAAA,CAAC,CAAGC,KAAK,CAACC,IAAN,CAAW7C,KAAK,CAACkD,GAAG,CAAG,CAAP,CAAhB,CAA2B,SAACzD,IAAD,QACjC,OAAOA,CAAAA,IAAP,GAAgB,WAAhB,CAA8B,EAA9B,CAAmCA,IADF,EAA3B,CAAR,CAIA,GAAI0D,CAAAA,UAAU,CAAGR,CAAC,CAACS,OAAF,CAAU,EAAV,CAAjB,CACA,GAAIC,CAAAA,GAAG,CAAG,CAAV,CACA,IAAK,GAAI5B,CAAAA,KAAK,CAAG0B,UAAjB,CAA6B1B,KAAK,CAAG,CAArC,CAAwCA,KAAK,EAA7C,CAAiD,CAC/CkB,CAAC,CAAClB,KAAD,CAAD,CAAW4B,GAAX,CACAA,GAAG,GACJ,CAED,MAAOV,CAAAA,CAAP,CACD,CAED,QAASW,CAAAA,eAAT,CAAyBxC,KAAzB,CAAgC,CAC9B,GAAIyC,CAAAA,QAAQ,CAAGzC,KAAK,CAAC4B,WAAN,EAAf,CACA,GAAI1C,CAAAA,KAAK,CAAG,EAAZ,CACA,GAAIwB,CAAAA,IAAI,CAAG,GAAIoB,CAAAA,KAAJ,CAAU,CAAV,CAAX,CACA,IAAK,GAAInB,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,EAAI8B,QAA7B,CAAuC9B,KAAK,EAA5C,CAAgD,CAC9C,GAAI+B,CAAAA,CAAC,CAAG1C,KAAK,CAACjB,IAAN,CAAW4B,KAAX,EAAkBnB,UAAlB,EAAR,CAEA,GAAIkB,IAAI,CAAC,CAAD,CAAJ,GAAYiC,SAAhB,CAA2B,CACzBzD,KAAK,CAACQ,IAAN,CAAWgB,IAAX,EACAA,IAAI,CAAG,GAAIoB,CAAAA,KAAJ,CAAU,CAAV,CAAP,CACApB,IAAI,CAACgC,CAAC,CAAG,CAAL,CAAJ,CAAc/B,KAAd,CACD,CAJD,IAIO,CACLD,IAAI,CAACgC,CAAC,CAAG,CAAL,CAAJ,CAAc/B,KAAd,CACD,CAED,GAAIA,KAAK,GAAK8B,QAAd,CAAwB,CACtBvD,KAAK,CAACQ,IAAN,CAAWgB,IAAX,EACD,CACF,CAED,GAAIkC,CAAAA,SAAS,CAAGpB,eAAe,CAACxB,KAAD,CAAQd,KAAR,CAA/B,CACAA,KAAK,CAAC2D,KAAN,GACA3D,KAAK,CAAC4D,OAAN,CAAcF,SAAd,EAEA,GAAIG,CAAAA,QAAQ,CAAGZ,aAAa,CAACjD,KAAD,CAA5B,CACAA,KAAK,CAAC8D,GAAN,GACA9D,KAAK,CAACQ,IAAN,CAAWqD,QAAX,EAEA,MAAO7D,CAAAA,KAAP,CACD,CAED,QAAS+D,CAAAA,eAAT,CAAyB1E,KAAzB,CAAgC,CAC9B;AAD8B,cAEIR,QAAQ,CAACE,MAAM,EAAP,CAFZ,wCAEvBkB,aAFuB,eAER+D,QAFQ,8BAGJnF,QAAQ,CAACyE,eAAe,CAACrD,aAAD,CAAhB,CAHJ,yCAGvBD,KAHuB,eAGhBiE,QAHgB,8BAIJpF,QAAQ,CAAC,EAAD,CAJJ,yCAIvBS,KAJuB,eAIhB4E,QAJgB,eAM9BpF,SAAS,CAAC,UAAM,CACdK,OAAO,GAAGgF,IAAV,CAAe,SAACC,GAAD,CAAS,CACtBF,QAAQ,CAACE,GAAD,CAAR,CACD,CAFD,EAGD,CAJQ,CAIN,EAJM,CAAT,CAMA,QAASC,CAAAA,aAAT,CAAuBhF,KAAvB,CAA8B,CAC5B,GAAIiF,CAAAA,SAAS,CAAGjF,KAAK,CAACgE,GAAN,CAAU,CAAV,CAAa,OAAb,CAAhB,CAEAW,QAAQ,CAACM,SAAD,CAAR,CACAL,QAAQ,CAACX,eAAe,CAACrD,aAAD,CAAhB,CAAR,CACD,CAED,QAASsE,CAAAA,iBAAT,CAA2BlF,KAA3B,CAAkC,CAChC,GAAImF,CAAAA,aAAa,CAAGnF,KAAK,CAACoF,QAAN,CAAe,CAAf,CAAkB,OAAlB,CAApB,CAEAT,QAAQ,CAACQ,aAAD,CAAR,CACAP,QAAQ,CAACX,eAAe,CAACrD,aAAD,CAAhB,CAAR,CACD,CAED,mBACE,oBAAC,KAAD,EAAO,SAAS,CAAE,CAAlB,eACE,2BAAK,SAAS,CAAC,kBAAf,eACE,2BAAK,SAAS,CAAC,mBAAf,eACE,2BAAK,SAAS,CAAC,mBAAf,eACE,8BACE,SAAS,CAAC,sBADZ,CAEE,OAAO,CAAE,yBAAMsE,CAAAA,iBAAiB,CAACtE,aAAD,CAAvB,EAFX,aADF,CADF,cASE,2BAAK,SAAS,CAAC,mBAAf,eACE,0BAAI,SAAS,CAAC,aAAd,EAA6BA,aAAa,CAACM,MAAd,CAAqB,MAArB,CAA7B,CADF,CATF,cAYE,2BAAK,SAAS,CAAC,mBAAf,eACE,8BACE,SAAS,CAAC,sBADZ,CAEE,OAAO,CAAE,yBAAM8D,CAAAA,aAAa,CAACpE,aAAD,CAAnB,EAFX,SADF,CAZF,CADF,cAsBE,4CACE,oBAAC,KAAD,EAAO,KAAK,CAAED,KAAd,CAAqB,aAAa,CAAEC,aAApC,CAAmD,KAAK,CAAEX,KAA1D,EADF,CAtBF,CADF,CADF,CA8BD,CAED,cAAeyE,CAAAA,eAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport moment from \"moment\";\nimport { GetTotal } from \"../Utilities/Total\";\nimport ModalWindow from \"../Components/ModalWindow\";\nimport { Paper } from \"@material-ui/core\";\nimport { getData } from \"../Data/ApiCalls\";\n\nfunction DayTable(props) {\n  const { items } = props;\n\n  const tableRows = items.map((item, i) => {\n    return (\n      <tr key={i}>\n        <td>{item.type}</td>\n        <td>{item.place}</td>\n        <td>{item.date}</td>\n        <td>{item.amount}</td>\n      </tr>\n    );\n  });\n\n  return (\n    <table className=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">Type</th>\n          <th scope=\"col\">Place</th>\n          <th scope=\"col\">Date</th>\n          <th scope=\"col\">Amount</th>\n        </tr>\n      </thead>\n      <tbody>{tableRows}</tbody>\n    </table>\n  );\n}\n\nfunction Table(props) {\n  const { weeks, items, selectedMonth } = props;\n\n  return (\n    <table className=\"table\">\n      <TableHead />\n      <TableBody weeks={weeks} items={items} selectedMonth={selectedMonth} />\n    </table>\n  );\n}\n\nfunction TableHead() {\n  const weekdayNames = [];\n  const weekTotal = <th className=\"align-middle text-center\">Week total</th>;\n\n  for (let i = 1; i <= 7; i++) {\n    const weekday = (\n      <th key={i} className=\"align-middle text-center\">\n        {moment().isoWeekday([i]).format(\"ddd\")}\n      </th>\n    );\n    weekdayNames.push(weekday);\n  }\n  weekdayNames.push(weekTotal);\n\n  return (\n    <thead>\n      <tr>{weekdayNames}</tr>\n    </thead>\n  );\n}\n\nfunction TableBody(props) {\n  const { weeks, items, selectedMonth } = props;\n\n  const spendingMonth = items.filter((item, i) => {\n    return new Date(item.date).getMonth() === selectedMonth.month();\n  });\n\n  const prevMonthSpending = items.filter((item, i) => {\n    return new Date(item.date).getMonth() === selectedMonth.month() - 1;\n  });\n\n  const nextMonthSpending = items.filter((item, i) => {\n    return new Date(item.date).getMonth() === selectedMonth.month() + 1;\n  });\n  console.log(nextMonthSpending);\n\n  let description = \"btn btn-outline-warning\";\n  let monthItems = spendingMonth;\n  let weeksLen = weeks.length;\n  const rows = weeks.map((week, index) => {\n    let weekSpending = 0;\n    let weekItems = [];\n\n    const td = week.map((day, i) => {\n      let daySpending;\n      const style = {\n        color: \"\",\n        backgroundColor: \"\",\n      };\n      if (index === 0 && day > 20) {\n        description = \"btn\";\n        style.color = \"black\";\n        style.backgroundColor = \"#e0e0e0\";\n        daySpending = prevMonthSpending.filter((item, i) => {\n          return moment(item.date).date() === day;\n        });\n      } else if (index === weeksLen - 1 && day < 10) {\n        description = \"btn \";\n        style.color = \"black\";\n        style.backgroundColor = \"#e0e0e0\";\n        daySpending = nextMonthSpending.filter((item, i) => {\n          return moment(item.date).date() === day;\n        });\n      } else {\n        description = \"btn \";\n        style.color = \"black\";\n        style.backgroundColor = \"#80cbc4\";\n        daySpending = spendingMonth.filter((item, i) => {\n          return moment(item.date).date() === day;\n        });\n      }\n\n      const totalPerDay = GetTotal(daySpending);\n      weekSpending += totalPerDay;\n\n      if (totalPerDay > 0) {\n        weekItems.push(daySpending);\n\n        return (\n          <td className=\"align-middle text-center\">\n            <ModalWindow\n              style={style}\n              buttonName={day}\n              headerName={`Total spent: ${totalPerDay}`}\n              classDescription={description}\n              bodyComponent={<DayTable items={daySpending} />}\n            />\n          </td>\n        );\n      } else {\n        return <td className=\"align-middle text-center\">{day}</td>;\n      }\n    });\n\n    if (weekSpending > 0) {\n      let weekStyle = {\n        backgroundColor: \"#ff8a65\",\n      };\n      return (\n        <tr>\n          {td}\n\n          <td className=\"align-middle text-center\">\n            <ModalWindow\n              style={weekStyle}\n              buttonName={weekSpending}\n              headerName={`Total spent: ${weekSpending}`}\n              classDescription=\"btn btn-block text-dark\"\n              bodyComponent={<DayTable items={weekItems.flat()} />}\n            />\n          </td>\n        </tr>\n      );\n    } else {\n      return <tr>{td}</tr>;\n    }\n  });\n\n  let monthStyle = {\n    backgroundColor: \"#ffd54f\",\n  };\n\n  return (\n    <tbody>\n      {rows}\n      <tr>\n        <td colSpan=\"12\" className=\"align-middle text-center\">\n          Total in {selectedMonth.format(\"MMMM\")} :{\" \"}\n          <ModalWindow\n            style={monthStyle}\n            buttonName={GetTotal(monthItems)}\n            headerName={`Total spent: ${GetTotal(monthItems)}`}\n            classDescription=\"btn btn-block text-dark\"\n            bodyComponent={<DayTable items={monthItems.flat()} />}\n          />\n        </td>\n      </tr>\n    </tbody>\n  );\n}\n\nfunction GetStartOfMonth(month, weeks) {\n  let currMonth = month.month();\n  let prevMonth = currMonth - 1;\n  let prevMonthDays = moment().month(prevMonth).daysInMonth();\n\n  let w = Array.from(weeks[0], (item) =>\n    typeof item === \"undefined\" ? \"\" : item\n  );\n\n  let missingStart = w.lastIndexOf(\"\");\n  let deduct = missingStart;\n  for (let index = 0; index <= missingStart; index++) {\n    w[index] = prevMonthDays - deduct;\n    deduct--;\n  }\n\n  return w;\n}\n\nfunction GetEndOfMonth(weeks) {\n  let len = weeks.length;\n\n  let w = Array.from(weeks[len - 1], (item) =>\n    typeof item === \"undefined\" ? \"\" : item\n  );\n\n  let missingEnd = w.indexOf(\"\");\n  let add = 1;\n  for (let index = missingEnd; index < 7; index++) {\n    w[index] = add;\n    add++;\n  }\n\n  return w;\n}\n\nfunction GetWeeksOfMonth(month) {\n  let dayCount = month.daysInMonth();\n  let weeks = [];\n  let week = new Array(7);\n  for (let index = 1; index <= dayCount; index++) {\n    let d = month.date(index).isoWeekday();\n\n    if (week[6] !== undefined) {\n      weeks.push(week);\n      week = new Array(7);\n      week[d - 1] = index;\n    } else {\n      week[d - 1] = index;\n    }\n\n    if (index === dayCount) {\n      weeks.push(week);\n    }\n  }\n\n  let firstWeek = GetStartOfMonth(month, weeks);\n  weeks.shift();\n  weeks.unshift(firstWeek);\n\n  let lastWeek = GetEndOfMonth(weeks);\n  weeks.pop();\n  weeks.push(lastWeek);\n\n  return weeks;\n}\n\nfunction DisplayCalendar(props) {\n  // const { items } = props;\n  const [selectedMonth, setMonth] = useState(moment());\n  const [weeks, setWeeks] = useState(GetWeeksOfMonth(selectedMonth));\n  const [items, setItems] = useState([]);\n\n  useEffect(() => {\n    getData().then((res) => {\n      setItems(res);\n    });\n  }, []);\n\n  function loadNextMonth(props) {\n    let nextMonth = props.add(1, \"month\");\n\n    setMonth(nextMonth);\n    setWeeks(GetWeeksOfMonth(selectedMonth));\n  }\n\n  function loadPreviousMonth(props) {\n    let previousMonth = props.subtract(1, \"month\");\n\n    setMonth(previousMonth);\n    setWeeks(GetWeeksOfMonth(selectedMonth));\n  }\n\n  return (\n    <Paper elevation={3}>\n      <div className=\"container border\">\n        <div className=\"row container m-3\">\n          <div className=\"col-3 text-center\">\n            <button\n              className=\"btn btn-outline-info\"\n              onClick={() => loadPreviousMonth(selectedMonth)}\n            >\n              Previous\n            </button>\n          </div>\n          <div className=\"col-6 text-center\">\n            <h4 className=\"text-middle\">{selectedMonth.format(\"MMMM\")}</h4>\n          </div>\n          <div className=\"col-3 text-center\">\n            <button\n              className=\"btn btn-outline-info\"\n              onClick={() => loadNextMonth(selectedMonth)}\n            >\n              Next\n            </button>\n          </div>\n        </div>\n        <div>\n          <Table weeks={weeks} selectedMonth={selectedMonth} items={items} />\n        </div>\n      </div>\n    </Paper>\n  );\n}\n\nexport default DisplayCalendar;\n"]},"metadata":{},"sourceType":"module"}